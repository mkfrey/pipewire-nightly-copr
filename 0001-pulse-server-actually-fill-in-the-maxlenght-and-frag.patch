From 20008b4846f4c86e6d6641c95045cd8360eebcfc Mon Sep 17 00:00:00 2001
From: Wim Taymans <wtaymans@redhat.com>
Date: Thu, 4 Feb 2021 14:53:28 +0100
Subject: [PATCH 1/2] pulse-server: actually fill in the maxlenght and
 fragsize..

---
 src/modules/module-protocol-pulse/pulse-server.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/modules/module-protocol-pulse/pulse-server.c b/src/modules/module-protocol-pulse/pulse-server.c
index 40ec4f830..55fa88d3c 100644
--- a/src/modules/module-protocol-pulse/pulse-server.c
+++ b/src/modules/module-protocol-pulse/pulse-server.c
@@ -1243,6 +1243,9 @@ static int reply_create_record_stream(struct stream *stream)
 
 	snprintf(latency, sizeof(latency), "%u/%u", lat.num, lat.denom);
 
+	snprintf(attr_maxlength, sizeof(attr_maxlength), "%u", stream->attr.maxlength);
+	snprintf(attr_fragsize, sizeof(attr_fragsize), "%u", stream->attr.fragsize);
+
 	items[0] = SPA_DICT_ITEM_INIT(PW_KEY_NODE_LATENCY, latency);
 	items[1] = SPA_DICT_ITEM_INIT("pulse.attr.maxlength", attr_maxlength);
 	items[2] = SPA_DICT_ITEM_INIT("pulse.attr.fragsize", attr_fragsize);
-- 
2.26.2

